/*! NSB Box v1.0.3 | (c) NSB Media, Lindenstrasse 16, 6340 Baar, www.nsbmedia.ch | Etienne Schorro - 2018 */
var animBreake=!1,currentLink=0;function isEndOf(n,t){return n.substr(-1*t.length,t.length)===t}function closeNSBBox(){$("#nsbbox").fadeOut(300),setTimeout(function(){$("#nsbbox").remove()},300)}function nsbBOXImgBack(){0==animBreake&&(animBreake=!0,$("#nsbBOXText").text(linksTextArr[currentLink]),$("#nsbbox img").css("box-shadow","none").animate({left:"-=3%",opacity:0},300,function(){$("#nsbbox img").attr("src",linksArr[currentLink]).css("left","53%").animate({left:"-=3%",opacity:1},200,function(){$(this).css("box-shadow","0 0 50px #333"),animBreake=!1})}),--currentLink<0&&(currentLink=countImgLink-1))}function nsbBOXImgForw(){0==animBreake&&(animBreake=!0,$("#nsbBOXText").text(linksTextArr[currentLink]),$("#nsbbox img").css("box-shadow","none").animate({left:"+=3%",opacity:0},300,function(){$("#nsbbox img").attr("src",linksArr[currentLink]).css("left","47%").animate({left:"+=3%",opacity:1},200,function(){$(this).css("box-shadow","0 0 50px #333"),animBreake=!1})}),++currentLink>=countImgLink&&(currentLink=0))}$(document).ready(function(){$(".nsbbox").on("click",function(n){if(n.stopPropagation(),img=!1,iframe=!0,$("#nsbbox").remove(),$("body").append('<div id="nsbbox"><div class="loader"></div><a class="pfeilLinks"></a><a class="pfeilRechts"></a><p id="nsbBOXText"></p><a class="closeBOX">X</a></div>'),$("#nsbbox").fadeOut(0).fadeIn(600),$("#nsbbox a.pfeilLinks, #nsbbox a.pfeilRechts").fadeOut(0),$("#nsbbox a.pfeilLinks, #nsbbox a.pfeilRechts").click(function(){return!1}),$("#nsbbox, a.closeBOX").click(function(){closeNSBBox()}),$("body").keyup(function(n){27==n.keyCode&&closeNSBBox(),37==n.keyCode&&nsbBOXImgBack(),39==n.keyCode&&nsbBOXImgForw()}),(isEndOf(n.currentTarget.href.split("?")[0],".jpg")||isEndOf(n.currentTarget.href.split("?")[0],".JPG")||isEndOf(n.currentTarget.href.split("?")[0],".jpeg")||isEndOf(n.currentTarget.href.split("?")[0],".JPEG"))&&(img=!0,iframe=!1),(isEndOf(n.currentTarget.href.split("?")[0],".png")||isEndOf(n.currentTarget.href.split("?")[0],".PNG"))&&(img=!0,iframe=!1),(isEndOf(n.currentTarget.href.split("?")[0],".gif")||isEndOf(n.currentTarget.href.split("?")[0],".GIF"))&&(img=!0,iframe=!1),n.target.alt&&$("#nsbBOXText").text(n.target.alt),n.target.title&&$("#nsbBOXText").text(n.target.title),n.currentTarget.alt&&$("#nsbBOXText").text(n.currentTarget.alt),n.currentTarget.title&&$("#nsbBOXText").text(n.currentTarget.title),1==img&&($("#nsbbox").append('<img id="swipeDetect" src="'+n.currentTarget.href+'">'),countImgLink=0,linksTextArr=new Array,linksArr=new Array,imagesArr=$("a.nsbbox").toArray(),imagesArr.forEach(function(n){(isEndOf(n.href.split("?")[0],".jpg")||isEndOf(n.href.split("?")[0],".JPG")||isEndOf(n.href.split("?")[0],".jpeg")||isEndOf(n.href.split("?")[0],".JPEG"))&&(linksTextArr[countImgLink]=n.title,linksArr[countImgLink]=n.href,countImgLink++),(isEndOf(n.href.split("?")[0],".png")||isEndOf(n.href.split("?")[0],".PNG"))&&(linksTextArr[countImgLink]=n.title,linksArr[countImgLink]=n.href,countImgLink++),(isEndOf(n.href.split("?")[0],".gif")||isEndOf(n.href.split("?")[0],".GIF"))&&(linksTextArr[countImgLink]=n.title,linksArr[countImgLink]=n.href,countImgLink++)}),countImgLink>1)){iLi=0,linksArr.forEach(function(t){n.currentTarget.href.split("?")[0]==t&&(currentLink=iLi),iLi++}),$("#nsbbox a.pfeilLinks, #nsbbox a.pfeilRechts").show(600),$("#nsbbox a.pfeilLinks").click(function(){nsbBOXImgBack()}),$("#nsbbox a.pfeilRechts").click(function(){nsbBOXImgForw()}),document.addEventListener("touchstart",function(n){t=n.touches[0].clientX,e=n.touches[0].clientY},!1),document.addEventListener("touchmove",function(n){if(!t||!e)return;var i=n.touches[0].clientX,r=n.touches[0].clientY,s=t-i,a=e-r;Math.abs(s)>Math.abs(a)&&(s>0?nsbBOXImgForw():nsbBOXImgBack());t=null,e=null},!1);var t=null,e=null}return 1==iframe&&(scrolling="","no"==$(this).data("scrolling")&&(scrolling='scrolling="no"'),$("#nsbbox").append("<iframe "+scrolling+' src="'+n.currentTarget.href+'"></iframe>'),$(this).data("width")&&$("#nsbbox iframe").width($(this).data("width")),$(this).data("height")&&$("#nsbbox iframe").height($(this).data("height"))),!1})});